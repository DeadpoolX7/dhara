<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Send Files to Desktop | dhara</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<!-- Bootstrap Icons -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
<style>
  body {
    background-color: #f8f9fa;
  }
  .upload-card {
    max-width: 500px;
    margin: 2rem auto;
    padding: 2rem;
    border-radius: 10px;
    background: #fff;
    box-shadow: 0 4px 8px rgba(0,0,0,0.05);
  }
  #progress-container {
    display: none;
    margin-top: 20px;
  }
  footer {
    margin-top: 3rem;
    padding: 1rem 0;
    background-color: #fff;
    text-align: center;
    border-top: 1px solid #e9ecef;
  }
  footer a {
    color: #495057;
    margin: 0 10px;
    font-size: 1.5rem;
    transition: color 0.2s ease-in-out;
  }
  footer a:hover {
    color: #0d6efd;
  }

  .footer-text {
    margin-bottom: 0.5rem;
    font-size: 0.9rem;
    text-align: center;
  }
</style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
  <div class="container">
    <a class="navbar-brand fw-bold text-primary" href="https://npmjs.com/package/dhara" target="_blank">dhara</a>
  </div>
</nav>

<!-- Upload Form -->
<div class="upload-card">
  <h2 class="text-center mb-4">Send Files to Desktop</h2>
  <form id="uploadForm">
    <div class="mb-3">
      <input type="file" class="form-control" id="files" name="files" multiple required>
    </div>
    <div class="d-grid">
      <button type="submit" class="btn btn-primary">Send</button>
    </div>
  </form>

  <div id="progress-container">
    <p class="mt-3 mb-1 text-muted">Uploading...</p>
    <progress id="progress" value="0" max="100" class="w-100"></progress>
  </div>
</div>

<!-- Footer -->
<footer>
  <div>
    <p class="footer-text">Follow the Developer here: </p>
    <a href="https://x.com/@class_sanju" target="_blank"><i class="bi bi-twitter"></i></a>
    <a href="https://github.com/DeadpoolX7" target="_blank"><i class="bi bi-github"></i></a>
  </div>
  <small class="text-muted">© 2025 dhara. All rights reserved.</small>
</footer>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
const form = document.getElementById('uploadForm');
const progressContainer = document.getElementById('progress-container');
const progressBar = document.getElementById('progress');

form.addEventListener('submit', async (e) => {
  e.preventDefault();
  const files = document.getElementById('files').files;
  if (!files.length) return alert('Select files first.');

  const formData = new FormData();
  for (let file of files) {
    formData.append('files', file);
  }

  progressContainer.style.display = 'block';
  
  const xhr = new XMLHttpRequest();
  xhr.open('POST', window.location.pathname, true);

  xhr.upload.onprogress = (event) => {
    if (event.lengthComputable) {
      const percent = (event.loaded / event.total) * 100;
      progressBar.value = percent;
    }
  };

  xhr.onload = () => {
    if (xhr.status === 200) {
      alert('✅ Files sent successfully!');
      progressBar.value = 100;
    } else {
      alert('❌ Upload failed.');
    }
  };

  xhr.send(formData);
});
</script>
</body>
</html>
